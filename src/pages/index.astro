---
import Layout from "../layouts/Layout.astro";
import Navbar from "../components/Navbar.astro";
import Timeline from "../components/Timeline.astro";
import SimpleCard from "../components/SimpleCard.astro";
// Mocks and requests
import { expMock } from "../data/Exp";
import type { Project } from "../data/Projects";
import { GetProyectsPagination } from "../data/Projects";
// Get projects
const github_token = import.meta.env.GITHUB_TOKEN;
const Projects: any = await GetProyectsPagination(github_token, 1, 3);
---

<Layout title="Personal Portfolio">
  <Navbar />
  <main class="py-5 px-8 lg:px-56">
    <div class="pb-4">
      <h1 class="text-white font-bold text-3xl">Experiencia Laboral</h1>
    </div>
    {
      expMock.map((exp, index) => (
        <Timeline
          date={exp.date}
          title={exp.title}
          description={exp.description}
          url={exp.url}
          details={exp.details}
          key={index}
        />
      ))
    }
    <div class="py-3">
      <h1 class="text-white font-bold text-3xl">Proyectos</h1>
    </div>
    <div class="grid grid-cols-1 gap-5">
      {
        Projects.map((project: Project, index: number) => (
          <SimpleCard
            name={project.name}
            description={project.description}
            html_url={project.html_url}
            topics={project.topics}
            key={index}
          />
        ))
      }
    </div>
  </main>
</Layout>

<style></style>
